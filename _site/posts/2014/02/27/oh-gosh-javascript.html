<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <title>Oh Gosh Javascript</title>
  <meta name="author" content="Richard Hsu">
  <meta name="keywords" content="richard hsu, blog, ideas, thoughts, performance" />
  <meta name="description" content="Exploring life, coding, food, and adventures!" />
  <meta name="viewport" content="width=device-width" />
  <meta name="google-site-verification" content="OmxMsLFmNXKOxX9hZRyFW9sZcita0lpB6lfqUuZQxZs" />
  <link href="https://fonts.googleapis.com/css?family=Karla:400,400i,700,700i" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://www.richardhsu.me/css/syntax.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="https://www.richardhsu.me/css/style.css" type="text/css" media="screen, projection" />
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="shortcut icon" href="https://www.richardhsu.me/images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="header">
  <div class="container">
    <div class="content-jar clearfix center">
      <div class="avatar"><img src="https://www.richardhsu.me/images/profile.png" height="100" width="100" /></div>
      <div class="description">
        <strong>Exploring life, coding, food, and adventures!</strong>
      </div>
      <ul class="pages">
        <li><a href="https://www.richardhsu.me/"><i class="fa fa-home"></i> Home</a></li>
        <!-- <li><a href="https://www.richardhsu.me/tag/"><i class="fa fa-tag"></i> Tags</a></li> -->
        <li><a href="https://www.richardhsu.me/search/"><i class="fa fa-search"></i> Search Blog</a></li>
      </ul>
    </div>
  </div>
</div>
<div id="feed">
  <div class="container">
    <div class="content-jar">
      <!-- Beginning of Posts Listing -->
      <div class="back-to-index"><a href="https://www.richardhsu.me">Back to Index</a></div>
<div class="post single-post">
  <div class="post-header">
    <h1><a href="/posts/2014/02/27/oh-gosh-javascript.html">Oh Gosh Javascript</a></h1>
    <span class="post-date"><i class="fa fa-calendar"></i> February 27, 2014</span>
    <span class="post-tags"><i class="fa fa-tag"></i>
      
      <a href="/tag/javascript" rel="tag">Javascript</a>, 
      
      <a href="/tag/tips" rel="tag">Tips</a>, 
      
      <a href="/tag/programming" rel="tag">Programming</a>
      
    </span>
  </div>
  <p>Javascript is a funny language. I rarely find myself going &quot;oh that makes sense&quot;
, but then again when I think about all the rules and structures of the
language, it does make sense in that context ... Of course, I&#39;m not justifying
the language decisions, just that based on the design of the language, the
outcomes make sense.</p>

<!--more-->

<p>Recently I ran into the issue of an event handler that didn&#39;t exist even though
it was clearly defined! An example of the code would be as such:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">div</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">element_id</span><span class="p">),</span>
    <span class="nx">button</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">"button"</span><span class="p">);</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">"Click Me"</span><span class="p">;</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">onclick</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s2">"Hello"</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">div</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">div</span><span class="p">);</span>
</code></pre></div>
<p>This is all fine and dandy and the event handler exists, but if we do something
afterward like:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="s2">"&lt;p&gt;More text inside the div.&lt;/p&gt;"</span><span class="p">;</span>
</code></pre></div>
<p>The event handler on the button disappears! This actually makes sense if you
understand <code>innerHTML</code>. I actually didn&#39;t know about this and figured
<code>innerHTML</code> was the structure and you could easily modify with appending, but
I didn&#39;t think that it caused a reparsing of the elements on the page. In effect
it is because the line becomes:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">div</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+</span> <span class="s2">"&lt;p&gt;More text inside the div.&lt;/p&gt;"</span><span class="p">;</span>
</code></pre></div>
<p>Therefore since the <code>onclick</code> event is defined in Javascript and doesn&#39;t carry
over in the HTML then when a reparsing is done the event disappears.</p>

<blockquote>
<p>Oh the mysteries of Javascript, how I have much to learn.</p>
</blockquote>

<p>I felt really stupid afterward, but hopefully now you know or you just think
I&#39;m stupid too. Oh well, as long as I&#39;m learning everyday!</p>

  <!-- Page Navigation -->
  <div id="post-navigation">
    
      <div class="post-link left-post">
        <div class="sub-nav">Previous Post</div>
        <a href="https://www.richardhsu.me/posts/2014/02/09/netcode-frustrations.html">Netcode</a>
      </div>
    
    
      <div class="post-link right-post">
        <div class="sub-nav">Next Post</div>
        <a href="https://www.richardhsu.me/posts/2014/04/01/rvm-mavericks.html">RVM on OS X Mavericks</a>
      </div>
    
  </div>

  
  <br />
  <br />
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'richardhsu'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  
</div>

      <!-- /End Posts Listing -->
      <br />
      <div class="center">
        <a href="http://fontawesome.io">Font Awesome</a> by Dave Gandy
      </div>
      <br />
      <div>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- responsive -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-0877100694764684"
             data-ad-slot="5749193711"
             data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      </div>
    </div>
  </div>
</div>
<!-- Tracking Code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51347261-1', 'richardhsu.me');
  ga('send', 'pageview');
</script>
<!-- /Tracking Code -->
</body>
</html>
