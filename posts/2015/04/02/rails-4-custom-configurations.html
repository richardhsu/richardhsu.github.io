<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <title>Rails 4 Custom Configurations</title>
  <meta name="author" content="Richard Hsu">
  <meta name="keywords" content="richard hsu, blog, ideas, thoughts, performance" />
  <meta name="description" content="Richard Hsu's blog about anything and performance!" />
  <meta name="viewport" content="width=device-width" />
  <meta name="google-site-verification" content="OmxMsLFmNXKOxX9hZRyFW9sZcita0lpB6lfqUuZQxZs" />
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="http://www.richardhsu.me/css/syntax.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="http://www.richardhsu.me/css/style.css" type="text/css" media="screen, projection" />
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  <link rel="shortcut icon" href="http://www.richardhsu.me/images/favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="header">
  <div class="content-jar clearfix">
    <div class="avatar left"><img src="http://www.richardhsu.me/images/profile.jpeg" height="100" width="100" /></div>
    <div class="description">
      <strong>Welcome to the Adventures with Richard Hsu!</strong><br />
      Here, I explore different subjects such as performance engineering, food, tv shows, movies, and
      really anything else that interests me! I hope to share my journey and adventures with you! Thanks
      for visiting!
    </div>
    <ul class="pages">
      <li><a href="http://www.richardhsu.me/"><i class="fa fa-home"></i> Home</a></li>
      <li><a href="http://www.richardhsu.me/tag/"><i class="fa fa-tag"></i> Tags</a></li>
      <li><a href="http://www.richardhsu.me/search/"><i class="fa fa-search"></i> Search Blog</a></li>
    </ul>
  </div>
</div>
<div id="container">
  <div class="content-jar listing">
    <!-- Beginning of Posts Listing -->
    <div class="back-to-index"><a href="http://www.richardhsu.me">Back to Index</a></div>
<div class="post single-post">
  <div class="post-header">
    <h1><a href="/posts/2015/04/02/rails-4-custom-configurations.html">Rails 4 Custom Configurations</a></h1>
    <span class="post-date"><i class="fa fa-calendar"></i> April 2, 2015</span>
    <span class="post-tags"><i class="fa fa-tag"></i>
      <a href="/tag/tips" rel="tag">Tips</a>, <a href="/tag/rails4" rel="tag">Rails4</a>, <a href="/tag/ruby" rel="tag">Ruby</a>
    </span>
  </div>
  <p>Was working on a Rails 4 side project when I realized that I should make a configuration file for a constant
that I wanted. I knew there was a way to do configuration in Rails, but wasn&#39;t sure what best practices were
so I looked it up. It turns out that as of Rails 4.2 there is now a configuration <code>x</code> namespace for you to
provide your own custom configurations!</p>

<!--more-->

<p>If you are developing in Rails 4.2+ then you have access to the <code>x</code> configuration namespace! Rails offers
four standard places to put initialization code:</p>

<ul>
<li>In the <code>config/application.rb</code> file: This is for configurations you need to run before Rails itself is
even loaded. This does not seem to be the recommended way as in the file it states: &quot;Application configuration
should go into files in <code>config/initializers</code> all <code>.rb</code> files in that directory are automatically loaded.&quot;</li>
<li>Environment-specific configuration files: These are under <code>config/environments/</code> folder such as
<code>config/environments/production.rb</code> and should be used for environment-specific configurations.</li>
<li>Initializers files which are under <code>config/initializers</code>: This seems to be the suggested method mentioned
earlier and is the way I will implement it.</li>
<li>After-initializers which seem to be utilized with <code>config.after_initialize</code> method in an initializer: This
would be for any configurations that need to be done after Rails has finished initializing and all other
initializers under <code>config/initializers</code> are completed.</li>
</ul>

<h2>Initializers</h2>

<p>You can add your own initializer under <code>config/initializers</code> as a <code>file_name.rb</code> and it will be loaded
automagically with all the other initializers in alphabetical order. I added a <code>my_app.rb</code> file to the
folder and put the following:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1"># My application specific configurations</span>
<span class="no">MyApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">retries</span> <span class="o">=</span> <span class="mi">3</span>
<span class="no">MyApp</span><span class="o">::</span><span class="no">Application</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">log_level</span> <span class="o">=</span> <span class="ss">:debug</span>
</code></pre></div>
<p>That&#39;s it! Simple, realize that this is specifically the <code>x</code> namespace and you cannot rename it! I originally
got tripped up by it because I thought you could use whatever you want as per <a href="http://guides.rubyonrails.org/v4.2.0/configuring.html#custom-configuration">the documentation</a> was
not super specific on the <code>x</code> portion. But as per the <a href="http://guides.rubyonrails.org/4_2_release_notes.html#railties-notable-changes">4.2 release notes</a> it clearly states that
they &quot;Introduced the <code>x</code> namespace for defining custom configuration options&quot;.</p>

<h3>Using Custom Configurations</h3>

<p>Finally, to use your custom configurations anywhere, you can actually now do the following anywhere in your
application to use:</p>
<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">Rails</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">retries</span>    <span class="c1"># =&gt; 3</span>
<span class="no">Rails</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="n">x</span><span class="o">.</span><span class="n">log_level</span>  <span class="c1"># =&gt; :debug</span>
</code></pre></div>
<p>That is all folks! Hope you learned a bit from the tip, and realize, sometimes they hide things in the
release notes that are helpful!</p>

  <!-- Page Navigation -->
  <div id="post-navigation">
    <div class="left">
      
        <a href="http://www.richardhsu.me/posts/2015/01/26/segmented-control.html">Adding a Segmented Control Programmatically</a>
      
    </div>
    <div class="right">
      
    </div>
  </div>

  
  <br />
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'richardhsu'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  
</div>

    <!-- /End Posts Listing -->
    <div>
      <center><a href="http://fontawesome.io">Font Awesome</a> by Dave Gandy</center>
    </div>
    <div>
      <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
      <!-- richardhsu.me -->
      <ins class="adsbygoogle"
           style="display:inline-block;width:320px;height:100px"
           data-ad-client="ca-pub-0877100694764684"
           data-ad-slot="8842260916"></ins>
      <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
    </div>
  </div>
</div>
<!-- Tracking Code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51347261-1', 'richardhsu.me');
  ga('send', 'pageview');
</script>
<!-- /Tracking Code -->
</body>
</html>
